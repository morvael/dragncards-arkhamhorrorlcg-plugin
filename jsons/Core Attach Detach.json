{
    "actionLists": {
        "attachCard": [
            ["COND",
                ["EQUAL", "$PLAYER_DATA.$PLAYER_N.cardToBeAttachedId", null],
                ["COND",
                    ["CAN_ATTACH_CARD", "$PLAYER_N", "$ACTIVE_CARD_ID", "$PLAYER_N"],
                    [
                        ["LOG", "└── {{$ALIAS_N}} wants to attach {{$ACTIVE_FACE.name}}."],
                        ["SET", "/cardById/$ACTIVE_CARD_ID/borderColor", "LightSkyBlue"],
                        ["SET", "/playerData/$PLAYER_N/cardToBeAttachedId", "$ACTIVE_CARD_ID"]
                    ],
                    ["TRUE"],
                    ["LOG", "└── You cannot attach {{$ACTIVE_FACE.name}}, {{$ALIAS_N}}."]
                ],
                ["TRUE"],
                [
                    ["VAR", "$ATTACHED_CARD_ID", "$PLAYER_DATA.$PLAYER_N.cardToBeAttachedId"],
                    ["COND",
                        ["CAN_ATTACH_CARD_TO_PARENT", "$PLAYER_N", "$ATTACHED_CARD_ID", "$ACTIVE_CARD_ID", "$PLAYER_N"],
                        ["DO_ATTACH_CARD", "$PLAYER_N", "$ATTACHED_CARD_ID", "$ACTIVE_CARD_ID", true, "$PLAYER_N"],
                        ["TRUE"],
                        ["LOG", "└── You cannot attach {{$CARD_BY_ID.$ATTACHED_CARD_ID.currentFace.name}} to {{$ACTIVE_FACE.name}}, {{$ALIAS_N}}."]
                    ],
                    ["UNSET", "/cardById/$ATTACHED_CARD_ID/borderColor"],
                    ["UNSET", "/playerData/$PLAYER_N/cardToBeAttachedId"]
                ]
            ]
        ],
        "attachCardFacedown": [
            ["COND",
                ["EQUAL", "$PLAYER_DATA.$PLAYER_N.cardToBeAttachedFacedownId", null],
                ["COND",
                    ["CAN_ATTACH_CARD_FACEDOWN", "$PLAYER_N", "$ACTIVE_CARD_ID", "$PLAYER_N"],
                    [
                        ["LOG", "└── {{$ALIAS_N}} wants to attach {{$ACTIVE_FACE.name}}."],
                        ["SET", "/cardById/$ACTIVE_CARD_ID/borderColor", "LightSteelBlue"],
                        ["SET", "/playerData/$PLAYER_N/cardToBeAttachedFacedownId", "$ACTIVE_CARD_ID"]
                    ],
                    ["TRUE"],
                    ["LOG", "└── You cannot attach {{$ACTIVE_FACE.name}} facedown, {{$ALIAS_N}}."]
                ],
                ["TRUE"],
                [
                    ["VAR", "$ATTACHED_CARD_ID", "$PLAYER_DATA.$PLAYER_N.cardToBeAttachedFacedownId"],
                    ["COND",
                        ["CAN_ATTACH_CARD_FACEDOWN_TO_PARENT", "$PLAYER_N", "$ATTACHED_CARD_ID", "$ACTIVE_CARD_ID", "$PLAYER_N"],
                        ["DO_ATTACH_CARD_FACEDOWN", "$PLAYER_N", "$ATTACHED_CARD_ID", "$ACTIVE_CARD_ID", true, "$PLAYER_N"],
                        ["TRUE"],
                        ["LOG", "└── You cannot attach {{$CARD_BY_ID.$ATTACHED_CARD_ID.currentFace.name}} facedown to {{$ACTIVE_FACE.name}}, {{$ALIAS_N}}."]
                    ],
                    ["UNSET", "/cardById/$ATTACHED_CARD_ID/borderColor"],
                    ["UNSET", "/playerData/$PLAYER_N/cardToBeAttachedFacedownId"]
                ]
            ]
        ],
        "putCardBeneath": [
            ["COND",
                ["EQUAL", "$PLAYER_DATA.$PLAYER_N.cardToBePutBeneathId", null],
                ["COND",
                    ["CAN_PUT_CARD_BENEATH", "$PLAYER_N", "$ACTIVE_CARD_ID", "$PLAYER_N"],
                    [
                        ["LOG", "└── {{$ALIAS_N}} wants to place {{$ACTIVE_FACE.name}} beneath a card."],
                        ["SET", "/cardById/$ACTIVE_CARD_ID/borderColor", "LightSeaGreen"],
                        ["SET", "/playerData/$PLAYER_N/cardToBePutBeneathId", "$ACTIVE_CARD_ID"]
                    ],
                    ["TRUE"],
                    ["LOG", "└── You cannot place {{$ACTIVE_FACE.name}} beneath a card, {{$ALIAS_N}}."]
                ],
                ["TRUE"],
                [
                    ["VAR", "$ATTACHED_CARD_ID", "$PLAYER_DATA.$PLAYER_N.cardToBePutBeneathId"],
                    ["COND",
                        ["CAN_PUT_CARD_BENEATH_PARENT", "$PLAYER_N", "$ATTACHED_CARD_ID", "$ACTIVE_CARD_ID", "$PLAYER_N"],
                        ["DO_PUT_CARD_BENEATH", "$PLAYER_N", "$ATTACHED_CARD_ID", "$ACTIVE_CARD_ID", true, "$PLAYER_N"],
                        ["TRUE"],
                        ["LOG", "└── You cannot place {{$CARD_BY_ID.$ATTACHED_CARD_ID.currentFace.name}} beneath {{$ACTIVE_FACE.name}}, {{$ALIAS_N}}."]
                    ],
                    ["UNSET", "/cardById/$ATTACHED_CARD_ID/borderColor"],
                    ["UNSET", "/playerData/$PLAYER_N/cardToBePutBeneathId"]
                ]
            ]
        ],
        "detachCard": [
            ["COND",
                ["CAN_DETACH_CARD", "$PLAYER_N", "$ACTIVE_CARD_ID", "$PLAYER_N"],
                ["DO_DETACH_CARD", "$PLAYER_N", "$ACTIVE_CARD_ID", true, "$PLAYER_N"],
                ["TRUE"],
                ["LOG", "└── You cannot detach {{$ACTIVE_FACE.name}}, {{$ALIAS_N}}."]
            ]
        ],
        "replaceLocation": [
            ["COND",
                ["EQUAL", "$PLAYER_DATA.$PLAYER_N.locationToBeReplacedId", null],
                ["COND",
                    ["CAN_REPLACE_LOCATION", "$PLAYER_N", "$ACTIVE_CARD_ID", "$PLAYER_N"],
                    [
                        ["LOG", "└── {{$ALIAS_N}} wants to replace {{$ACTIVE_FACE.name}}."],
                        ["SET", "/cardById/$ACTIVE_CARD_ID/borderColor", "LightPink"],
                        ["SET", "/playerData/$PLAYER_N/locationToBeReplacedId", "$ACTIVE_CARD_ID"]
                    ],
                    ["TRUE"],
                    ["LOG", "└── You cannot replace {{$ACTIVE_FACE.name}}, {{$ALIAS_N}}."]
                ],
                ["TRUE"],
                [
                    ["VAR", "$REPLACED_CARD_ID", "$PLAYER_DATA.$PLAYER_N.locationToBeReplacedId"],
                    ["COND",
                        ["CAN_REPLACE_LOCATION_WITH", "$PLAYER_N", "$ACTIVE_CARD_ID", "$REPLACED_CARD_ID", "$PLAYER_N"],
                        ["DO_REPLACE_LOCATION", "$PLAYER_N", "$ACTIVE_CARD_ID", "$REPLACED_CARD_ID", true, "$PLAYER_N"],
                        ["TRUE"],
                        ["LOG", "└── You cannot replace {{$CARD_BY_ID.$REPLACED_CARD_ID.currentFace.name}} with {{$ACTIVE_FACE.name}}, {{$ALIAS_N}}."]
                    ],
                    ["UNSET", "/cardById/$REPLACED_CARD_ID/borderColor"],
                    ["UNSET", "/playerData/$PLAYER_N/locationToBeReplacedId"]
                ]
            ]
        ],
        "sendToBack": [
            ["COND",
                ["CAN_SEND_TO_BACK", "$PLAYER_N", "$ACTIVE_CARD_ID", "$PLAYER_N"],
                ["DO_SEND_TO_BACK", "$PLAYER_N", "$ACTIVE_CARD_ID", true, "$PLAYER_N"],
                ["TRUE"],
                ["LOG", "└── You cannot send {{$ACTIVE_FACE.name}} to back, {{$ALIAS_N}}."]
            ]
        ],
        "bringToFront": [
            ["COND",
                ["CAN_BRING_TO_FRONT", "$PLAYER_N", "$ACTIVE_CARD_ID", "$PLAYER_N"],
                ["DO_BRING_TO_FRONT", "$PLAYER_N", "$ACTIVE_CARD_ID", true, "$PLAYER_N"],
                ["TRUE"],
                ["LOG", "└── You cannot bring {{$ACTIVE_FACE.name}} to front, {{$ALIAS_N}}."]
            ]
        ]
    },
    "functions": {
        "GET_ATTACHED_CARDS": {
            "args": ["$TARGET_CARD_ID"],
            "code": [
                ["VAR", "$TARGET_CARD", ["GET_CARD_AND_VALIDATE", "$TARGET_CARD_ID", "GET_ATTACHED_CARDS.TARGET_CARD_ID"]],
                ["FILTER_CARDS", "$CARD", ["AND",
                    ["EQUAL", "$CARD.parentCardId", "$TARGET_CARD_ID"],
                    ["NOT_EQUAL", "$CARD.id", "$TARGET_CARD_ID"]
                ]]
           ]
        },
        "GET_ATTACHED_CARDS_COUNT": {
            "args": ["$TARGET_CARD_ID"],
            "code": [
                ["VAR", "$TARGET_CARD", ["GET_CARD_AND_VALIDATE", "$TARGET_CARD_ID", "GET_ATTACHED_CARDS_COUNT.TARGET_CARD_ID"]],
                ["COND",
                    ["EQUAL", "$TARGET_CARD.cardIndex", 0],
                    [
                        ["VAR", "$TARGET_CARD_STACK_ID", ["GET_STACK_ID", "$TARGET_CARD.groupId", "$TARGET_CARD.stackIndex"]],
                        ["SUBTRACT", ["LENGTH", "$STACK_BY_ID.$TARGET_CARD_STACK_ID.cardIds"], 1]
                    ],
                    ["TRUE"],
                    0
                ]
           ]
        },
        "CAN_ATTACH_CARD": {
            "args": ["$TARGET_PLAYER", "$TARGET_CARD_ID", "$ACTOR_PLAYER"],
            "code": [
                ["VALIDATE_PLAYER", "$TARGET_PLAYER", "CAN_ATTACH_CARD.TARGET_PLAYER"],
                ["VAR", "$TARGET_CARD", ["GET_CARD_AND_VALIDATE", "$TARGET_CARD_ID", "CAN_ATTACH_CARD.TARGET_CARD_ID"]],
                ["AND",
                    ["EQUAL", "$TARGET_CARD.attachedCount", 0],
                    ["OR",
                        ["AND",
                            ["EQUAL", "$TARGET_CARD.inHand", false],
                            ["OR",
                                ["GET_UNSAFE_ALLOWED", "$ACTOR_PLAYER"],
                                ["EQUAL", "$TARGET_CARD.currentFace.type", "Asset"],
                                ["EQUAL", "$TARGET_CARD.currentFace.type", "Treachery"],
                                ["EQUAL", "$TARGET_CARD.currentFace.type", "Event"],
                                ["EQUAL", "$TARGET_CARD.currentFace.type", "Skill"],
                                ["EQUAL", "$TARGET_CARD.currentFace.type", "Enemy"],
                                ["EQUAL", "$TARGET_CARD.currentFace.type", "Reference"],
                                ["EQUAL", "$TARGET_CARD.currentFace.type", "Key"],
                                ["EQUAL", "$TARGET_CARD.currentFace.type", "ChaosToken"],
                                ["EQUAL", "$TARGET_CARD.currentFace.type", "KeyToken"],
                                ["EQUAL", "$TARGET_CARD.currentFace.type", "FloodedToken"],
                                ["EQUAL", "$TARGET_CARD.currentFace.type", "SealToken"],
                                ["IN_STRING", "$TARGET_CARD.currentFace.type", "StandardToken"],
                                ["EQUAL", "$TARGET_CARD.currentFace.type", "Supplies"]
                            ]
                        ],
                        ["AND",
                            ["EQUAL", "$TARGET_CARD.inHand", true],
                            ["IN_STRING", "$TARGET_CARD.groupId", "$TARGET_PLAYER"],
                            ["OR",
                                ["GET_UNSAFE_ALLOWED", "$ACTOR_PLAYER"],
                                ["EQUAL", "$TARGET_CARD.sides.A.type", "Asset"],
                                ["EQUAL", "$TARGET_CARD.sides.A.type", "Treachery"],
                                ["EQUAL", "$TARGET_CARD.sides.A.type", "Event"],
                                ["EQUAL", "$TARGET_CARD.sides.A.type", "Skill"],
                                ["EQUAL", "$TARGET_CARD.sides.A.type", "Enemy"],
                                ["EQUAL", "$TARGET_CARD.sides.A.type", "Reference"],
                                ["EQUAL", "$TARGET_CARD.sides.A.type", "Key"],
                                ["EQUAL", "$TARGET_CARD.sides.A.type", "ChaosToken"],
                                ["EQUAL", "$TARGET_CARD.sides.A.type", "KeyToken"],
                                ["EQUAL", "$TARGET_CARD.sides.A.type", "FloodedToken"],
                                ["EQUAL", "$TARGET_CARD.sides.A.type", "SealToken"],
                                ["IN_STRING", "$TARGET_CARD.sides.A.type", "StandardToken"],
                                ["EQUAL", "$TARGET_CARD.sides.A.type", "Supplies"]
                            ]
                        ]
                    ]
                ]
            ]
        },
        "CAN_ATTACH_CARD_TO_PARENT": {
            "args": ["$TARGET_PLAYER", "$TARGET_CARD_ID", "$PARENT_CARD_ID", "$ACTOR_PLAYER"],
            "code": [
                ["VALIDATE_PLAYER", "$TARGET_PLAYER", "CAN_ATTACH_CARD_TO_PARENT.TARGET_PLAYER"],
                ["VAR", "$TARGET_CARD", ["GET_CARD_AND_VALIDATE", "$TARGET_CARD_ID", "CAN_ATTACH_CARD_TO_PARENT.TARGET_CARD_ID"]],
                ["VAR", "$PARENT_CARD", ["GET_CARD_AND_VALIDATE", "$PARENT_CARD_ID", "CAN_ATTACH_CARD_TO_PARENT.PARENT_CARD_ID"]],
                ["AND",
                    ["NOT_EQUAL", "$TARGET_CARD_ID", "$PARENT_CARD_ID"],
                    ["EQUAL", "$PARENT_CARD.inAdvanced", true],
                    ["EQUAL", "$PARENT_CARD.cardIndex", 0],
                    ["OR",
                        ["GET_UNSAFE_ALLOWED", "$ACTOR_PLAYER"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Investigator"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Asset"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Treachery"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Event"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Skill"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Enemy"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Scenario"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Agenda"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Act"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Location"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Story"]
                    ],
                    ["CAN_ATTACH_CARD", "$TARGET_PLAYER", "$TARGET_CARD_ID", "$ACTOR_PLAYER"]
                ]
            ]
        },
        "DO_ATTACH_CARD": {
            "args": ["$TARGET_PLAYER", "$TARGET_CARD_ID", "$PARENT_CARD_ID", "$LOG_EVENT", "$ACTOR_PLAYER"],
            "code": [
                ["VALIDATE_PLAYER", "$TARGET_PLAYER", "DO_ATTACH_CARD.TARGET_PLAYER"],
                ["VAR", "$TARGET_CARD", ["GET_CARD_AND_VALIDATE", "$TARGET_CARD_ID", "DO_ATTACH_CARD.TARGET_CARD_ID"]],
                ["VAR", "$PARENT_CARD", ["GET_CARD_AND_VALIDATE", "$PARENT_CARD_ID", "DO_ATTACH_CARD.PARENT_CARD_ID"]],
                ["VALIDATE_BOOLEAN", "$LOG_EVENT", "DO_ATTACH_CARD.LOG_EVENT"],
                ["COND",
                    ["CAN_ATTACH_CARD_TO_PARENT", "$TARGET_PLAYER", "$TARGET_CARD_ID", "$PARENT_CARD_ID", "$ACTOR_PLAYER"],
                    [
                        ["VAR", "$TARGET_NAME", ["GET_CARD_NAME", "$TARGET_CARD_ID"]],
                        ["COND",
                            ["GREATER_THAN", "$TARGET_CARD.cardIndex", 0],
                            ["DO_LOG", "$LOG_EVENT", "$ACTOR_PLAYER", "$TARGET_PLAYER", "reattach {{$TARGET_NAME}} from {{$TARGET_CARD.parentCard.currentFace.name}} to {{$PARENT_CARD.currentFace.name}}.", "reattaches {{$TARGET_NAME}} from {{$TARGET_CARD.parentCard.currentFace.name}} to {{$PARENT_CARD.currentFace.name}}."],
                            ["TRUE"],
                            ["DO_LOG", "$LOG_EVENT", "$ACTOR_PLAYER", "$TARGET_PLAYER", "attach {{$TARGET_NAME}} to {{$PARENT_CARD.currentFace.name}}.", "attaches {{$TARGET_NAME}} to {{$PARENT_CARD.currentFace.name}}."]
                        ],
                        ["ATTACH_CARD", "$TARGET_CARD_ID", "$PARENT_CARD_ID"],
                        ["COND",
                            ["AND",
                                ["NOT_EQUAL", ["IN_STRING", "$TARGET_CARD.currentFace.type", "Token"], true],
                                ["NOT_EQUAL", "$TARGET_CARD.currentFace.type", "Supplies"]
                            ],
                            ["SET", "/cardById/$TARGET_CARD_ID/attachmentDirection", "left"]
                        ]
                    ]
                ]
            ]
        },
        "CAN_ATTACH_CARD_FACEDOWN": {
            "args": ["$TARGET_PLAYER", "$TARGET_CARD_ID", "$ACTOR_PLAYER"],
            "code": [
                ["VALIDATE_PLAYER", "$TARGET_PLAYER", "CAN_ATTACH_CARD_FACEDOWN.TARGET_PLAYER"],
                ["VAR", "$TARGET_CARD", ["GET_CARD_AND_VALIDATE", "$TARGET_CARD_ID", "CAN_ATTACH_CARD_FACEDOWN.TARGET_CARD_ID"]],
                ["AND",
                    ["EQUAL", "$TARGET_CARD.attachedCount", 0],
                    ["EQUAL", "$TARGET_CARD.currentSide", "B"],
                    ["OR",
                        ["EQUAL", "$TARGET_CARD.sides.B.name", "Player Card"],
                        ["EQUAL", "$TARGET_CARD.sides.B.name", "Encounter Card"]
                    ]
                ]
            ]
        },
        "CAN_ATTACH_CARD_FACEDOWN_TO_PARENT": {
            "args": ["$TARGET_PLAYER", "$TARGET_CARD_ID", "$PARENT_CARD_ID", "$ACTOR_PLAYER"],
            "code": [
                ["VALIDATE_PLAYER", "$TARGET_PLAYER", "CAN_ATTACH_CARD_FACEDOWN_TO_PARENT.TARGET_PLAYER"],
                ["VAR", "$TARGET_CARD", ["GET_CARD_AND_VALIDATE", "$TARGET_CARD_ID", "CAN_ATTACH_CARD_FACEDOWN_TO_PARENT.TARGET_CARD_ID"]],
                ["VAR", "$PARENT_CARD", ["GET_CARD_AND_VALIDATE", "$PARENT_CARD_ID", "CAN_ATTACH_CARD_FACEDOWN_TO_PARENT.PARENT_CARD_ID"]],
                ["AND",
                    ["NOT_EQUAL", "$TARGET_CARD_ID", "$PARENT_CARD_ID"],
                    ["EQUAL", "$PARENT_CARD.inAdvanced", true],
                    ["EQUAL", "$PARENT_CARD.cardIndex", 0],
                    ["OR",
                        ["GET_UNSAFE_ALLOWED", "$ACTOR_PLAYER"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Investigator"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Asset"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Treachery"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Event"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Skill"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Enemy"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Scenario"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Agenda"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Act"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Location"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Story"]
                    ],
                    ["CAN_ATTACH_CARD_FACEDOWN", "$TARGET_PLAYER", "$TARGET_CARD_ID", "$ACTOR_PLAYER"]
                ]
            ]
        },
        "DO_ATTACH_CARD_FACEDOWN": {
            "args": ["$TARGET_PLAYER", "$TARGET_CARD_ID", "$PARENT_CARD_ID", "$LOG_EVENT", "$ACTOR_PLAYER"],
            "code": [
                ["VALIDATE_PLAYER", "$TARGET_PLAYER", "DO_ATTACH_CARD_FACEDOWN.TARGET_PLAYER"],
                ["VAR", "$TARGET_CARD", ["GET_CARD_AND_VALIDATE", "$TARGET_CARD_ID", "DO_ATTACH_CARD_FACEDOWN.TARGET_CARD_ID"]],
                ["VAR", "$PARENT_CARD", ["GET_CARD_AND_VALIDATE", "$PARENT_CARD_ID", "DO_ATTACH_CARD_FACEDOWN.PARENT_CARD_ID"]],
                ["VALIDATE_BOOLEAN", "$LOG_EVENT", "DO_ATTACH_CARD_FACEDOWN.LOG_EVENT"],
                ["COND",
                    ["CAN_ATTACH_CARD_FACEDOWN_TO_PARENT", "$TARGET_PLAYER", "$TARGET_CARD_ID", "$PARENT_CARD_ID", "$ACTOR_PLAYER"],
                    [
                        ["COND",
                            ["GREATER_THAN", "$TARGET_CARD.cardIndex", 0],
                            ["DO_LOG", "$LOG_EVENT", "$ACTOR_PLAYER", "$TARGET_PLAYER", "reattach {{$TARGET_CARD.sides.B.name}} from {{$TARGET_CARD.parentCard.currentFace.name}} facedown to {{$PARENT_CARD.currentFace.name}}.", "reattaches {{$TARGET_CARD.sides.B.name}} from {{$TARGET_CARD.parentCard.currentFace.name}} facedown to {{$PARENT_CARD.currentFace.name}}."],
                            ["TRUE"],
                            ["DO_LOG", "$LOG_EVENT", "$ACTOR_PLAYER", "$TARGET_PLAYER", "attach {{$TARGET_CARD.sides.B.name}} facedown to {{$PARENT_CARD.currentFace.name}}.", "attaches {{$TARGET_CARD.sides.B.name}} facedown to {{$PARENT_CARD.currentFace.name}}."]
                        ],
                        ["SET", "/cardById/$TARGET_CARD_ID/disableSideChange", true],
                        ["ATTACH_CARD", "$TARGET_CARD_ID", "$PARENT_CARD_ID"],
                        ["SET", "/cardById/$TARGET_CARD_ID/disableSideChange", false],
                        ["SET", "/cardById/$TARGET_CARD_ID/attachmentDirection", "left"],
                        ["DO_FLIP_FACEDOWN", "$TARGET_PLAYER", "$TARGET_CARD_ID", false, null]
                    ]
                ]
            ]
        },
        "CAN_PUT_CARD_BENEATH": {
            "args": ["$TARGET_PLAYER", "$TARGET_CARD_ID", "$ACTOR_PLAYER"],
            "code": [
                ["VALIDATE_PLAYER", "$TARGET_PLAYER", "CAN_PUT_CARD_BENEATH.TARGET_PLAYER"],
                ["VAR", "$TARGET_CARD", ["GET_CARD_AND_VALIDATE", "$TARGET_CARD_ID", "CAN_PUT_CARD_BENEATH.TARGET_CARD_ID"]],
                ["AND",
                    ["EQUAL", "$TARGET_CARD.attachedCount", 0],
                    ["OR",
                        ["AND",
                            ["EQUAL", "$TARGET_CARD.inHand", false],
                            ["OR",
                                ["GET_UNSAFE_ALLOWED", "$ACTOR_PLAYER"],
                                ["EQUAL", "$TARGET_CARD.currentFace.type", "Asset"],
                                ["EQUAL", "$TARGET_CARD.currentFace.type", "Treachery"],
                                ["EQUAL", "$TARGET_CARD.currentFace.type", "Event"],
                                ["EQUAL", "$TARGET_CARD.currentFace.type", "Skill"],
                                ["EQUAL", "$TARGET_CARD.currentFace.type", "Enemy"],
                                ["EQUAL", "$TARGET_CARD.currentFace.type", "Reference"],
                                ["EQUAL", "$TARGET_CARD.currentFace.type", "Story"],
                                ["EQUAL", "$TARGET_CARD.currentFace.type", "Key"]
                            ]
                        ],
                        ["AND",
                            ["EQUAL", "$TARGET_CARD.inHand", true],
                            ["IN_STRING", "$TARGET_CARD.groupId", "$TARGET_PLAYER"],
                            ["OR",
                                ["GET_UNSAFE_ALLOWED", "$ACTOR_PLAYER"],
                                ["EQUAL", "$TARGET_CARD.sides.A.type", "Asset"],
                                ["EQUAL", "$TARGET_CARD.sides.A.type", "Treachery"],
                                ["EQUAL", "$TARGET_CARD.sides.A.type", "Event"],
                                ["EQUAL", "$TARGET_CARD.sides.A.type", "Skill"],
                                ["EQUAL", "$TARGET_CARD.sides.A.type", "Enemy"],
                                ["EQUAL", "$TARGET_CARD.sides.A.type", "Reference"],
                                ["EQUAL", "$TARGET_CARD.sides.A.type", "Story"],
                                ["EQUAL", "$TARGET_CARD.sides.A.type", "Key"]
                            ]
                        ]
                    ]
                ]
            ]
        },
        "CAN_PUT_CARD_BENEATH_PARENT": {
            "args": ["$TARGET_PLAYER", "$TARGET_CARD_ID", "$PARENT_CARD_ID", "$ACTOR_PLAYER"],
            "code": [
                ["VALIDATE_PLAYER", "$TARGET_PLAYER", "CAN_PUT_CARD_BENEATH_PARENT.TARGET_PLAYER"],
                ["VAR", "$TARGET_CARD", ["GET_CARD_AND_VALIDATE", "$TARGET_CARD_ID", "CAN_PUT_CARD_BENEATH_PARENT.TARGET_CARD_ID"]],
                ["VAR", "$PARENT_CARD", ["GET_CARD_AND_VALIDATE", "$PARENT_CARD_ID", "CAN_PUT_CARD_BENEATH_PARENT.PARENT_CARD_ID"]],
                ["AND",
                    ["NOT_EQUAL", "$TARGET_CARD_ID", "$PARENT_CARD_ID"],
                    ["EQUAL", "$PARENT_CARD.inAdvanced", true],
                    ["EQUAL", "$PARENT_CARD.cardIndex", 0],
                    ["OR",
                        ["GET_UNSAFE_ALLOWED", "$ACTOR_PLAYER"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Investigator"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Asset"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Treachery"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Event"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Skill"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Enemy"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Scenario"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Agenda"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Act"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Location"],
                        ["EQUAL", "$PARENT_CARD.currentFace.type", "Story"]
                    ],
                    ["CAN_PUT_CARD_BENEATH", "$TARGET_PLAYER", "$TARGET_CARD_ID", "$ACTOR_PLAYER"]
                ]
            ]
        },
        "DO_PUT_CARD_BENEATH": {
            "args": ["$TARGET_PLAYER", "$TARGET_CARD_ID", "$PARENT_CARD_ID", "$LOG_EVENT", "$ACTOR_PLAYER"],
            "code": [
                ["VALIDATE_PLAYER", "$TARGET_PLAYER", "DO_PUT_CARD_BENEATH.TARGET_PLAYER"],
                ["VAR", "$TARGET_CARD", ["GET_CARD_AND_VALIDATE", "$TARGET_CARD_ID", "DO_PUT_CARD_BENEATH.TARGET_CARD_ID"]],
                ["VAR", "$PARENT_CARD", ["GET_CARD_AND_VALIDATE", "$PARENT_CARD_ID", "DO_PUT_CARD_BENEATH.PARENT_CARD_ID"]],
                ["VALIDATE_BOOLEAN", "$LOG_EVENT", "DO_PUT_CARD_BENEATH.LOG_EVENT"],
                ["COND",
                    ["CAN_PUT_CARD_BENEATH_PARENT", "$TARGET_PLAYER", "$TARGET_CARD_ID", "$PARENT_CARD_ID", "$ACTOR_PLAYER"],
                    [
                        ["VAR", "$TARGET_NAME", ["GET_CARD_NAME", "$TARGET_CARD_ID"]],
                        ["DO_LOG", "$LOG_EVENT", "$ACTOR_PLAYER", "$TARGET_PLAYER", "place {{$TARGET_NAME}} beneath {{$PARENT_CARD.currentFace.name}}.", "places {{$TARGET_NAME}} beneath {{$PARENT_CARD.currentFace.name}}."],
                        ["SET", "/cardById/$TARGET_CARD_ID/playIntent", "placeBehind"],
                        ["ATTACH_CARD", "$TARGET_CARD_ID", "$PARENT_CARD_ID"],
                        ["SET", "/cardById/$TARGET_CARD_ID/attachmentDirection", "behind"],
                        ["SET", "/cardById/$TARGET_CARD_ID/playIntent", ""]
                    ]
                ]
            ]
        },
        "CAN_DETACH_CARD": {
            "args": ["$TARGET_PLAYER", "$TARGET_CARD_ID", "$ACTOR_PLAYER"],
            "code": [
                ["VALIDATE_PLAYER", "$TARGET_PLAYER", "CAN_DETACH_CARD.TARGET_PLAYER"],
                ["VAR", "$TARGET_CARD", ["GET_CARD_AND_VALIDATE", "$TARGET_CARD_ID", "CAN_DETACH_CARD.TARGET_CARD_ID"]],
                ["AND",
                    ["GREATER_THAN", "$TARGET_CARD.cardIndex", 0],
                    ["OR",
                        ["GET_UNSAFE_ALLOWED", "$ACTOR_PLAYER"],
                        ["NOT_EQUAL", "$TARGET_CARD.currentFace.type", "FirstInvestigatorToken"]
                    ]
                ]
            ]
        },
        "DO_DETACH_CARD": {
            "args": ["$TARGET_PLAYER", "$TARGET_CARD_ID", "$LOG_EVENT", "$ACTOR_PLAYER"],
            "code": [
                ["VALIDATE_PLAYER", "$TARGET_PLAYER", "DO_DETACH_CARD.TARGET_PLAYER"],
                ["VAR", "$TARGET_CARD", ["GET_CARD_AND_VALIDATE", "$TARGET_CARD_ID", "DO_DETACH_CARD.TARGET_CARD_ID"]],
                ["VALIDATE_BOOLEAN", "$LOG_EVENT", "DO_DETACH_CARD.LOG_EVENT"],
                ["COND",
                    ["CAN_DETACH_CARD", "$TARGET_PLAYER", "$TARGET_CARD_ID", "$ACTOR_PLAYER"],
                    [
                        ["DO_LOG", "$LOG_EVENT", "$ACTOR_PLAYER", "$TARGET_PLAYER", "detach {{$TARGET_CARD.currentFace.name}} from {{$TARGET_CARD.parentCard.currentFace.name}}.", "detaches {{$TARGET_CARD.currentFace.name}} from {{$TARGET_CARD.parentCard.currentFace.name}}."],
                        ["COND",
                            ["EQUAL", "$TARGET_CARD.groupId", "sharedLocations"],
                            [
                                ["VAR", "$LEFT", ["GET_CARD_LEFT", "$TARGET_CARD_ID"]],
                                ["VAR", "$TOP", ["GET_CARD_TOP", "$TARGET_CARD_ID"]],
                                ["MOVE_CARD", "$TARGET_CARD_ID", "$TARGET_CARD.groupId", -1],
                                ["DO_SET_CARD_LOCATION", "$TARGET_CARD_ID", ["ADD", "$LEFT", 3], ["ADD", "$TOP", 3]]
                            ],
                            ["TRUE"],
                            ["MOVE_CARD", "$TARGET_CARD_ID", "$TARGET_CARD.groupId", ["ADD", "$TARGET_CARD.stackIndex", 1], 0, {"combine": false, "allowFlip": false}]
                        ]
                    ]
                ]
            ]
        },
        "PRIVATE_DO_REPLACE_CARD_FULLY": {
            "args": ["$TARGET_PLAYER", "$TARGET_CARD_ID", "$TARGET_CARD", "$REPLACED_CARD_ID", "$REPLACED_CARD", "$LOG_EVENT", "$ACTOR_PLAYER", "$FLIP_LOCATION"],
            "code": [
                ["VAR", "$TARGET_NAME", ["GET_CARD_NAME", "$TARGET_CARD_ID"]],
                ["DO_LOG", "$LOG_EVENT", "$ACTOR_PLAYER", "$TARGET_PLAYER", "replace {{$REPLACED_CARD.currentFace.name}} with {{$TARGET_NAME}}.", "replaces {{$REPLACED_CARD.currentFace.name}} with {{$TARGET_NAME}}."],
                ["VAR", "$REPLACED_ATTACHED", ["LIST"]],
                ["FOR_EACH_KEY_VAL", "$CARD_ID", "$CARD", "$GAME.cardById", [
                    ["COND",
                        ["AND",
                            ["EQUAL", "$CARD.parentCardId", "$REPLACED_CARD_ID"],
                            ["NOT_EQUAL", "$CARD_ID", "$REPLACED_CARD_ID"]
                        ],
                        ["UPDATE_VAR", "$REPLACED_ATTACHED", ["APPEND", "$REPLACED_ATTACHED", "$CARD"]]
                    ]
                ]],
                ["MOVE_CARD", "$TARGET_CARD_ID", "$REPLACED_CARD.groupId", ["ADD", "$REPLACED_CARD.stackIndex", 1], 0, {"combine": false, "allowFlip": false}],
                ["COND",
                    ["EQUAL", "$REPLACED_CARD.groupId", "sharedLocations"],
                    ["DO_SET_CARD_LOCATION", "$TARGET_CARD_ID", ["GET_CARD_LEFT", "$REPLACED_CARD_ID"], ["GET_CARD_TOP", "$REPLACED_CARD_ID"]]
                ],
                ["SET", "/cardById/$TARGET_CARD_ID/rotation", "$REPLACED_CARD.rotation"],
                ["SET", "/cardById/$TARGET_CARD_ID/targeting", "$REPLACED_CARD.targeting"],
                ["COND",
                    ["AND",
                        ["EQUAL", "$FLIP_LOCATION", true],
                        ["NOT_EQUAL", "$CARD_BY_ID.$TARGET_CARD_ID.currentFace.type", "Location"]
                    ],
                    ["DO_FLIP_CARD", "$TARGET_PLAYER", "$TARGET_CARD_ID", false, null]
                ],
                ["DO_MOVE_TOKENS", "$REPLACED_CARD_ID", "$TARGET_CARD_ID"],
                ["FOR_EACH_VAL", "$CARD", "$REPLACED_ATTACHED", [
                    ["ATTACH_CARD", "$CARD.id", "$TARGET_CARD_ID"],
                    ["SET", "/cardById/$CARD.id/attachmentDirection", "$CARD.attachmentDirection"]
                ]],
                ["SET", "/cardById/$REPLACED_CARD_ID/targeting", {}]
            ]
        },
        "CAN_REPLACE_CARD_FULLY": {
            "args": ["$TARGET_PLAYER", "$REPLACED_CARD_ID", "$ACTOR_PLAYER"],
            "code": [
                ["VALIDATE_PLAYER", "$TARGET_PLAYER", "CAN_REPLACE_CARD_FULLY.TARGET_PLAYER"],
                ["VAR", "$REPLACED_CARD", ["GET_CARD_AND_VALIDATE", "$REPLACED_CARD_ID", "CAN_REPLACE_CARD_FULLY.REPLACED_CARD_ID"]],
                ["EQUAL", "$REPLACED_CARD.cardIndex", 0]
            ]
        },
        "CAN_REPLACE_CARD_FULLY_WITH": {
            "args": ["$TARGET_PLAYER", "$TARGET_CARD_ID", "$REPLACED_CARD_ID", "$ACTOR_PLAYER"],
            "code": [
                ["VALIDATE_PLAYER", "$TARGET_PLAYER", "CAN_REPLACE_CARD_FULLY_WITH.TARGET_PLAYER"],
                ["VAR", "$TARGET_CARD", ["GET_CARD_AND_VALIDATE", "$TARGET_CARD_ID", "CAN_REPLACE_CARD_FULLY_WITH.TARGET_CARD_ID"]],
                ["VAR", "$REPLACED_CARD", ["GET_CARD_AND_VALIDATE", "$REPLACED_CARD_ID", "CAN_REPLACE_CARD_FULLY_WITH.REPLACED_CARD_ID"]],
                ["AND",
                    ["NOT_EQUAL", "$TARGET_CARD_ID", "$REPLACED_CARD_ID"],
                    ["EQUAL", "$TARGET_CARD.cardIndex", 0],
                    ["CAN_REPLACE_CARD_FULLY", "$TARGET_PLAYER", "$REPLACED_CARD_ID", "$ACTOR_PLAYER"]
                ]
            ]
        },
        "DO_REPLACE_CARD_FULLY": {
            "args": ["$TARGET_PLAYER", "$TARGET_CARD_ID", "$REPLACED_CARD_ID", "$LOG_EVENT", "$ACTOR_PLAYER"],
            "code": [
                ["VALIDATE_PLAYER", "$TARGET_PLAYER", "DO_REPLACE_CARD_FULLY.TARGET_PLAYER"],
                ["VAR", "$TARGET_CARD", ["GET_CARD_AND_VALIDATE", "$TARGET_CARD_ID", "DO_REPLACE_CARD_FULLY.TARGET_CARD_ID"]],
                ["VAR", "$REPLACED_CARD", ["GET_CARD_AND_VALIDATE", "$REPLACED_CARD_ID", "DO_REPLACE_CARD_FULLY.REPLACED_CARD_ID"]],
                ["VALIDATE_BOOLEAN", "$LOG_EVENT", "DO_REPLACE_CARD_FULLY.LOG_EVENT"],
                ["COND",
                    ["CAN_REPLACE_CARD_FULLY_WITH", "$TARGET_PLAYER", "$TARGET_CARD_ID", "$REPLACED_CARD_ID", "$ACTOR_PLAYER"],
                    ["PRIVATE_DO_REPLACE_CARD_FULLY", "$TARGET_PLAYER", "$TARGET_CARD_ID", "$TARGET_CARD", "$REPLACED_CARD_ID", "$REPLACED_CARD", "$LOG_EVENT", "$ACTOR_PLAYER", false]
                ]
            ]
        },
        "CAN_REPLACE_LOCATION": {
            "args": ["$TARGET_PLAYER", "$REPLACED_CARD_ID", "$ACTOR_PLAYER"],
            "code": [
                ["VALIDATE_PLAYER", "$TARGET_PLAYER", "CAN_REPLACE_LOCATION.TARGET_PLAYER"],
                ["VAR", "$REPLACED_CARD", ["GET_CARD_AND_VALIDATE", "$REPLACED_CARD_ID", "CAN_REPLACE_LOCATION.REPLACED_CARD_ID"]],
                ["AND",
                    ["EQUAL", "$REPLACED_CARD.groupId", "sharedLocations"],
                    ["EQUAL", "$REPLACED_CARD.cardIndex", 0],
                    ["EQUAL", "$REPLACED_CARD.currentFace.type", "Location"]
                ]
            ]
        },
        "CAN_REPLACE_LOCATION_WITH": {
            "args": ["$TARGET_PLAYER", "$TARGET_CARD_ID", "$REPLACED_CARD_ID", "$ACTOR_PLAYER"],
            "code": [
                ["VALIDATE_PLAYER", "$TARGET_PLAYER", "CAN_REPLACE_LOCATION_WITH.TARGET_PLAYER"],
                ["VAR", "$TARGET_CARD", ["GET_CARD_AND_VALIDATE", "$TARGET_CARD_ID", "CAN_REPLACE_LOCATION_WITH.TARGET_CARD_ID"]],
                ["VAR", "$REPLACED_CARD", ["GET_CARD_AND_VALIDATE", "$REPLACED_CARD_ID", "CAN_REPLACE_LOCATION_WITH.REPLACED_CARD_ID"]],
                ["AND",
                    ["NOT_EQUAL", "$TARGET_CARD_ID", "$REPLACED_CARD_ID"],
                    ["EQUAL", "$TARGET_CARD.cardIndex", 0],
                    ["OR",
                        ["AND",
                            ["EQUAL", "$TARGET_CARD.inHand", false],
                            ["EQUAL", "$TARGET_CARD.currentFace.type", "Location"]
                        ],
                        ["AND",
                            ["EQUAL", "$TARGET_CARD.inHand", true],
                            ["IN_STRING", "$TARGET_CARD.groupId", "$TARGET_PLAYER"],
                            ["EQUAL", "$TARGET_CARD.sides.A.type", "Location"]
                        ]
                    ],
                    ["CAN_REPLACE_LOCATION", "$TARGET_PLAYER", "$REPLACED_CARD_ID", "$ACTOR_PLAYER"]
                ]
            ]
        },
        "DO_REPLACE_LOCATION": {
            "args": ["$TARGET_PLAYER", "$TARGET_CARD_ID", "$REPLACED_CARD_ID", "$LOG_EVENT", "$ACTOR_PLAYER"],
            "code": [
                ["VALIDATE_PLAYER", "$TARGET_PLAYER", "DO_REPLACE_LOCATION.TARGET_PLAYER"],
                ["VAR", "$TARGET_CARD", ["GET_CARD_AND_VALIDATE", "$TARGET_CARD_ID", "DO_REPLACE_LOCATION.TARGET_CARD_ID"]],
                ["VAR", "$REPLACED_CARD", ["GET_CARD_AND_VALIDATE", "$REPLACED_CARD_ID", "DO_REPLACE_LOCATION.REPLACED_CARD_ID"]],
                ["VALIDATE_BOOLEAN", "$LOG_EVENT", "DO_REPLACE_LOCATION.LOG_EVENT"],
                ["COND",
                    ["CAN_REPLACE_LOCATION_WITH", "$TARGET_PLAYER", "$TARGET_CARD_ID", "$REPLACED_CARD_ID", "$ACTOR_PLAYER"],
                    ["PRIVATE_DO_REPLACE_CARD_FULLY", "$TARGET_PLAYER", "$TARGET_CARD_ID", "$TARGET_CARD", "$REPLACED_CARD_ID", "$REPLACED_CARD", "$LOG_EVENT", "$ACTOR_PLAYER", true]
                ]
            ]
        },
        "CAN_SEND_TO_BACK": {
            "args": ["$TARGET_PLAYER", "$TARGET_CARD_ID", "$ACTOR_PLAYER"],
            "code": [
                ["VALIDATE_PLAYER", "$TARGET_PLAYER", "CAN_SEND_TO_BACK.TARGET_PLAYER"],
                ["VAR", "$TARGET_CARD", ["GET_CARD_AND_VALIDATE", "$TARGET_CARD_ID", "CAN_SEND_TO_BACK.TARGET_CARD_ID"]],
                ["AND",
                    ["EQUAL", "$TARGET_CARD.groupId", "sharedLocations"],
                    ["EQUAL", "$TARGET_CARD.cardIndex", 0]
                ]
            ]
        },
        "DO_SEND_TO_BACK": {
            "args": ["$TARGET_PLAYER", "$TARGET_CARD_ID", "$LOG_EVENT", "$ACTOR_PLAYER"],
            "code": [
                ["VALIDATE_PLAYER", "$TARGET_PLAYER", "DO_SEND_TO_BACK.TARGET_PLAYER"],
                ["VAR", "$TARGET_CARD", ["GET_CARD_AND_VALIDATE", "$TARGET_CARD_ID", "DO_SEND_TO_BACK.TARGET_CARD_ID"]],
                ["VALIDATE_BOOLEAN", "$LOG_EVENT", "DO_SEND_TO_BACK.LOG_EVENT"],
                ["COND",
                    ["CAN_SEND_TO_BACK", "$TARGET_PLAYER", "$TARGET_CARD_ID", "$ACTOR_PLAYER"],
                    [
                        ["DO_LOG", "$LOG_EVENT", "$ACTOR_PLAYER", "$TARGET_PLAYER", "send {{$TARGET_CARD.currentFace.name}} to back.", "sends {{$TARGET_CARD.currentFace.name}} to back."],
                        ["VAR", "$TARGET_LEFT", ["GET_CARD_LEFT", "$TARGET_CARD_ID"]],
                        ["VAR", "$TARGET_TOP", ["GET_CARD_TOP", "$TARGET_CARD_ID"]],
                        ["MOVE_CARD", "$TARGET_CARD_ID", "$TARGET_CARD.groupId", 0, 0, {"combine": false, "allowFlip": false}],
                        ["DO_SET_CARD_LOCATION", "$TARGET_CARD_ID", "$TARGET_LEFT", "$TARGET_TOP"]
                    ]
                ]
            ]
        },
        "CAN_BRING_TO_FRONT": {
            "args": ["$TARGET_PLAYER", "$TARGET_CARD_ID", "$ACTOR_PLAYER"],
            "code": [
                ["VALIDATE_PLAYER", "$TARGET_PLAYER", "CAN_BRING_TO_FRONT.TARGET_PLAYER"],
                ["VAR", "$TARGET_CARD", ["GET_CARD_AND_VALIDATE", "$TARGET_CARD_ID", "CAN_BRING_TO_FRONT.TARGET_CARD_ID"]],
                ["AND",
                    ["EQUAL", "$TARGET_CARD.groupId", "sharedLocations"],
                    ["EQUAL", "$TARGET_CARD.cardIndex", 0]
                ]
            ]
        },
        "DO_BRING_TO_FRONT": {
            "args": ["$TARGET_PLAYER", "$TARGET_CARD_ID", "$LOG_EVENT", "$ACTOR_PLAYER"],
            "code": [
                ["VALIDATE_PLAYER", "$TARGET_PLAYER", "DO_BRING_TO_FRONT.TARGET_PLAYER"],
                ["VAR", "$TARGET_CARD", ["GET_CARD_AND_VALIDATE", "$TARGET_CARD_ID", "DO_BRING_TO_FRONT.TARGET_CARD_ID"]],
                ["VALIDATE_BOOLEAN", "$LOG_EVENT", "DO_BRING_TO_FRONT.LOG_EVENT"],
                ["COND",
                    ["CAN_BRING_TO_FRONT", "$TARGET_PLAYER", "$TARGET_CARD_ID", "$ACTOR_PLAYER"],
                    [
                        ["DO_LOG", "$LOG_EVENT", "$ACTOR_PLAYER", "$TARGET_PLAYER", "bring {{$TARGET_CARD.currentFace.name}} to front.", "brings {{$TARGET_CARD.currentFace.name}} to front."],
                        ["VAR", "$TARGET_LEFT", ["GET_CARD_LEFT", "$TARGET_CARD_ID"]],
                        ["VAR", "$TARGET_TOP", ["GET_CARD_TOP", "$TARGET_CARD_ID"]],
                        ["MOVE_CARD", "$TARGET_CARD_ID", "$TARGET_CARD.groupId", -1],
                        ["DO_SET_CARD_LOCATION", "$TARGET_CARD_ID", "$TARGET_LEFT", "$TARGET_TOP"]
                    ]
                ]
            ]
        }
    },
    "labels": {
        "attachCard": {
            "English": "Attach"
        },
        "attachCardMenu": {
            "English": "Attach (A)"
        },
        "attachToCardMenu": {
            "English": "Attach to (A)"
        },
        "attachCardFacedown": {
            "English": "Attach facedown"
        },
        "attachCardFacedownMenu": {
            "English": "Attach facedown (Ctrl+A)"
        },
        "attachToCardFacedownMenu": {
            "English": "Attach facedown to (Ctrl+A)"
        },
        "putCardBeneath": {
            "English": "Place beneath"
        },
        "putCardBeneathMenu": {
            "English": "Place beneath (Z)"
        },
        "putBeneathCardMenu": {
            "English": "Place beneath this (Z)"
        },
        "detachCard": {
            "English": "Detach"
        },
        "detachCardMenu": {
            "English": "Detach (D)"
        },
        "replaceLocation": {
            "English": "Replace"
        },
        "replaceLocationMenu": {
            "English": "Replace (L)"
        },
        "replaceLocationWithMenu": {
            "English": "Replace with (L)"
        },
        "sendToBack": {
            "English": "To back"
        },
        "sendToBackMenu": {
            "English": "To back ([)"
        },
        "bringToFront": {
            "English": "To front"
        },
        "bringToFrontMenu": {
            "English": "To front (])"
        }
    }
}