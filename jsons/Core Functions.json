{
    "functions": {
        "DELETE_CARD_BY_TITLE": {
            "args": ["$CARD_TITLE"],
            "code": [
                ["VAR", "$MATCHED_CARD", ["ONE_CARD", "$CARD", ["EQUAL", "$CARD.currentFace.name", "$CARD_TITLE"]]],
                ["COND",
                    ["NOT_EQUAL", "$MATCHED_CARD", null],
                    ["DELETE_CARD", "$MATCHED_CARD.id"]
                ]
            ]
        },
        "DISCARD_N_RANDOM_CARDS_FROM_HAND": {
            "args": ["$PLAYER_I", "$NUMBER"],
            "code": [
                ["VAR", "$SELECTED_CARDS", ["CHOOSE_N", "$GAME.groupById.{{$PLAYER_I}}Deck.parentCards", "$NUMBER"]],
                ["COND",
                    ["GREATER_THAN", ["LENGTH", "$SELECTED_CARDS"], 0],
                    [
                        ["VAR", "$ALIAS_I", ["GET_ALIAS", "$PLAYER_I"]],
                        ["FOR_EACH_VAL", "$CARD", "$SELECTED_CARDS", [
                            ["LOG", "{{$ALIAS_I}} discarded {{$CARD.sides.A.name}}."],
                            ["MOVE_CARD", "$CARD.id", "{{$PLAYER_I}}Discard", 0]
                        ]]
                    ]
                ]
            ]
        },
        "LOAD_N_CARDS": {
            "args": ["$LIST_ID", "$NUM"],
            "code": [
                ["LOAD_CARDS", ["CHOOSE_N", ["GET_LOAD_LIST", "$LIST_ID"], "$NUM"]]
            ]
        },
        "LOAD_RANDOM_LIST": {
            "args": ["$LIST_OF_LISTS"],
            "code": [
                ["LOAD_CARDS", ["AT_INDEX", "$LIST_OF_LISTS", ["RANDOM_INT", 0, ["LENGTH", "$LIST_OF_LISTS"]]]]
            ]
        },
        "PLACE_DOOM_ON_CURRENT_AGENDA": {
            "args": ["$NUMBER_OF_DOOM_TOKENS"],
            "code": [
                ["VAR", "$AGENDA_CARD", ["GET_CARD", "sharedAgendaDeck", 0, 0]],
                ["COND",
                    ["NOT_EQUAL", "$AGENDA_CARD", null],
                    [
                        ["LOG", "{{$ALIAS_N}} placed {{$NUMBER_OF_DOOM_TOKENS}} doom on {{$AGENDA_CARD.currentFace.name}}."],
                        ["INCREASE_VAL", "/cardById/$AGENDA_CARD.id/tokens/doom", "$NUMBER_OF_DOOM_TOKENS"]
                    ]
                ]
            ]
        },
        "PLACE_MINI_INVESTIGATORS": {
            "args": ["$LEFT", "$TOP"],
            "code": [
                ["VAR", "$SELECTED_MINI_INVESTIGATORS", ["FILTER_CARDS", "$CARD", ["EQUAL", "$CARD.currentFace.type", "MiniInvestigator"]]],
                ["FOR_EACH_VAL", "$SELECTED_MINI_INVESTIGATOR", "$SELECTED_MINI_INVESTIGATORS", [
                    ["MOVE_CARD", "$SELECTED_MINI_INVESTIGATOR.id", "sharedLocations", -1]
                ]],
                ["VAR", "$SELECTED_MINI_INVESTIGATORS", ["FILTER_CARDS", "$CARD", ["EQUAL", "$CARD.currentFace.type", "MiniInvestigator"]]],
                ["VAR", "$X", ["ADD", "$LEFT", 5]],
                ["VAR", "$Y", ["ADD", "$TOP", 7]],
                ["FOR_EACH_VAL", "$SELECTED_MINI_INVESTIGATOR", "$SELECTED_MINI_INVESTIGATORS", [
                    ["SET_CARD_LOCATION", "$SELECTED_MINI_INVESTIGATOR", "{{$X}}%", "{{$Y}}%"],
                    ["INCREASE_VAR", "$X", 3]
                ]]
            ]
        },
        "SET_CARD_LOCATION": {
            "args": ["$CARD", "$LEFT", "$TOP"],
            "code": [
                ["VAR", "$STACK_ID", "$GAME.groupById.{{$CARD.groupId}}.stackIds.[{{$CARD.stackIndex}}]"],
                ["SET", "/stackById/$STACK_ID/left", "$LEFT"],
                ["SET", "/stackById/$STACK_ID/top",  "$TOP"]
            ]
        }
    }
}