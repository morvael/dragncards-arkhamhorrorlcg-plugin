{
    "actionLists": {
        "discardCard": [
            ["COND",
                ["OR",
                    ["EQUAL", "$ACTIVE_CARD.sides.A.permanent", true],
                    ["EQUAL", "$ACTIVE_FACE.type", "Scenario"],
                    ["EQUAL", "$ACTIVE_FACE.type", "Agenda"],
                    ["EQUAL", "$ACTIVE_FACE.type", "Act"],
                    ["EQUAL", "$ACTIVE_FACE.type", "Location"],
                    ["EQUAL", "$ACTIVE_FACE.type", "Story"],
                    ["EQUAL", "$ACTIVE_FACE.type", "FirstInvestigatorToken"],
                    ["EQUAL", "$ACTIVE_FACE.type", "MiniInvestigator"]
                ],
                ["LOG", "{{$ACTIVE_FACE.name}} cannot be discarded, {{$ALIAS_N}}."],
                ["EQUAL", "$ACTIVE_FACE.type", "Investigator"],
                ["COND",
                    ["AND",
                        ["EQUAL", "$ACTIVE_CARD.groupId", "{{$PLAYER_N}}Investigator"],
                        ["NOT_EQUAL", "$GAME.playerData.$PLAYER_N.eliminated", true],
                        ["NOT_EQUAL", "$GAME.arkhamScenarioInit", true]
                    ],
                    ["PROMPT", "$PLAYER_N", "eliminateInvestigator", "$ACTIVE_CARD"],
                    ["TRUE"],
                    ["LOG", "{{$ACTIVE_FACE.name}} cannot be eliminated, {{$ALIAS_N}}."]
                ],
                ["OR",
                    ["EQUAL", "$ACTIVE_FACE.type", "KeyToken"],
                    ["EQUAL", "$ACTIVE_FACE.type", "FloodedToken"],
                    ["EQUAL", "$ACTIVE_FACE.type", "SealToken"]
                ],
                ["COND",
                    ["NOT_EQUAL", "$ACTIVE_CARD.groupId", "sharedTokens"],
                    [
                        ["LOG", "{{$ALIAS_N}} discards {{$ACTIVE_FACE.name}}."],
                        ["MOVE_CARD", "$ACTIVE_CARD_ID", "sharedTokens", -1]
                    ],
                    ["TRUE"],
                    ["LOG", "{{$ACTIVE_FACE.name}} cannot be discarded from here, {{$ALIAS_N}}."]
                ],
                ["OR",
                    ["EQUAL", "$ACTIVE_FACE.type", "Key"],
                    ["EQUAL", "$ACTIVE_FACE.type", "MiniConcealed"]
                ],
                ["COND",
                    ["NOT_EQUAL", "$ACTIVE_CARD.groupId", "sharedNotInPlay"],
                    [
                        ["LOG", "{{$ALIAS_N}} removes {{$ACTIVE_FACE.name}} from play."],
                        ["MOVE_CARD", "$ACTIVE_CARD_ID", "sharedNotInPlay", -1]
                    ],
                    ["TRUE"],
                    ["LOG", "{{$ACTIVE_FACE.name}} cannot be removed from play from here, {{$ALIAS_N}}."]
                ],
                ["EQUAL", "$ACTIVE_FACE.type", "ChaosToken"],
                ["COND",
                    ["NOT_EQUAL", "$ACTIVE_CARD.groupId", "sharedChaosBag"],
                    ["COND",
                        ["OR",
                            ["EQUAL", "$ACTIVE_FACE.name", "Bless"],
                            ["EQUAL", "$ACTIVE_FACE.name", "Curse"]
                        ],
                        [
                            ["LOG", "{{$ALIAS_N}} removes {{$ACTIVE_FACE.name}} Chaos Token from play."],
                            ["DELETE_CARD", "$ACTIVE_CARD_ID"]
                        ],
                        ["TRUE"],
                        [
                            ["LOG", "{{$ALIAS_N}} discards {{$ACTIVE_FACE.name}} Chaos Token."],
                            ["MOVE_CARD", "$ACTIVE_CARD_ID", "sharedChaosBag", -1]
                        ]
                    ],
                    ["TRUE"],
                    ["LOG", "{{$ACTIVE_FACE.name}} Chaos Token cannot be removed or discarded from here, {{$ALIAS_N}}."]
                ],
                ["OR",
                    ["EQUAL", "$ACTIVE_CARD.inPlay", true],
                    ["EQUAL", "$ACTIVE_CARD.inHand", true]
                ],
                ["COND",
                    ["AND",
                        ["NOT_EQUAL", "$ACTIVE_CARD.sides.B.databaseId", null],
                        ["GREATER_THAN", "$ACTIVE_FACE.victoryPoints", 0]
                    ],
                    [
                        ["LOG", "{{$ALIAS_N}} moves {{$ACTIVE_FACE.name}} to Victory Display."],
                        ["MOVE_CARD", "$ACTIVE_CARD_ID", "sharedVictoryDisplay", -1]
                    ],
                    ["NOT_EQUAL", "$ACTIVE_CARD.sides.B.databaseId", null],
                    ["LOG", "{{$ACTIVE_FACE.name}} cannot be discarded, {{$ALIAS_N}}."],
                    ["GREATER_THAN", "$ACTIVE_FACE.victoryPoints", 0],
                    ["PROMPT", "$PLAYER_N", "victoryOrDiscard", "$ACTIVE_CARD"],
                    ["TRUE"],
                    [
                        ["LOG", "{{$ALIAS_N}} discards {{$ACTIVE_CARD.sides.A.name}}."],
                        ["COND",
                            ["EQUAL", "$ACTIVE_CARD.sides.B.name", "Encounter Card"],
                            ["MOVE_CARD", "$ACTIVE_CARD_ID", "sharedEncounterDiscard", 0],
                            ["EQUAL", "$ACTIVE_CARD.controller", "player1"],
                            ["MOVE_CARD", "$ACTIVE_CARD_ID", "player1Discard", 0],
                            ["EQUAL", "$ACTIVE_CARD.controller", "player2"],
                            ["MOVE_CARD", "$ACTIVE_CARD_ID", "player2Discard", 0],
                            ["EQUAL", "$ACTIVE_CARD.controller", "player3"],
                            ["MOVE_CARD", "$ACTIVE_CARD_ID", "player3Discard", 0],
                            ["TRUE"],
                            ["MOVE_CARD", "$ACTIVE_CARD_ID", "player4Discard", 0]
                        ]
                    ]
                ],
                ["EQUAL", "$ACTIVE_CARD.inDeck", true],
                [
                    ["LOG", "{{$ALIAS_N}} discards {{$ACTIVE_CARD.sides.A.name}} from the top of {{$ACTIVE_GROUP.label}}."],
                    ["MOVE_CARD", "$ACTIVE_CARD_ID", "$ACTIVE_CARD.discardToPile", 0]
                ],
                ["TRUE"],
                ["LOG", "{{$ACTIVE_FACE.name}} cannot be discarded from here, {{$ALIAS_N}}."]
            ]
        ]
    },
    "prompts": {
        "victoryOrDiscard": {
            "args": ["$DISCARDED_CARD"],
            "message": "{{$DISCARDED_CARD.currentFace.name}} is Victory {{$DISCARDED_CARD.currentFace.victoryPoints}}. Select destination.",
            "options": [
                {
                    "label": "Victory Display",
                    "hotkey": "V",
                    "code": [
                        ["LOG", "{{$ALIAS_N}} moves {{$DISCARDED_CARD.currentFace.name}} to Victory Display."],
                        ["MOVE_CARD", "$DISCARDED_CARD.id", "sharedVictoryDisplay", -1]
                    ]
                },
                {
                    "label": "Discard Pile",
                    "hotkey": "D",
                    "code": [
                        ["LOG", "{{$ALIAS_N}} discards {{$DISCARDED_CARD.sides.A.name}}."],
                        ["COND",
                            ["EQUAL", "$DISCARDED_CARD.sides.B.name", "Encounter Card"],
                            ["MOVE_CARD", "$DISCARDED_CARD", "sharedEncounterDiscard", 0],
                            ["EQUAL", "$DISCARDED_CARD.controller", "player1"],
                            ["MOVE_CARD", "$DISCARDED_CARD.id", "player1Discard", 0],
                            ["EQUAL", "$DISCARDED_CARD.controller", "player2"],
                            ["MOVE_CARD", "$DISCARDED_CARD.id", "player2Discard", 0],
                            ["EQUAL", "$DISCARDED_CARD.controller", "player3"],
                            ["MOVE_CARD", "$DISCARDED_CARD.id", "player3Discard", 0],
                            ["TRUE"],
                            ["MOVE_CARD", "$DISCARDED_CARD.id", "player4Discard", 0]
                        ]
                    ]
                }
            ]
        }
    },
    "labels": {
        "discardCard": {
            "English": "Discard"
        }
    }
}