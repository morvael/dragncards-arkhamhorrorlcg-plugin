{
    "actionLists": {
        "toggleSideboard": [
            ["DO_TOGGLE_SIDEBOARD", "$PLAYER_N", true, "$PLAYER_N"]
        ],
        "toggleOffMap": [
            ["DO_TOGGLE_SIDEBOARD_GROUP", "$PLAYER_N", "sharedOffMap", true, "$PLAYER_N"]
        ],
        "toggleNotInPlay": [
            ["DO_TOGGLE_SIDEBOARD_GROUP", "$PLAYER_N", "sharedNotInPlay", true, "$PLAYER_N"]
        ],
        "toggleVictoryDisplay": [
            ["DO_TOGGLE_SIDEBOARD_GROUP", "$PLAYER_N", "sharedVictoryDisplay", true, "$PLAYER_N"]
        ],
        "toggleTokens": [
            ["DO_TOGGLE_SIDEBOARD_GROUP", "$PLAYER_N", "sharedTokens", true, "$PLAYER_N"]
        ],
        "toggleChaosBag": [
            ["DO_TOGGLE_SIDEBOARD_GROUP", "$PLAYER_N", "sharedChaosBag", true, "$PLAYER_N"]
        ]
    },
    "functions": {
        "DO_TOGGLE_SIDEBOARD": {
            "args": ["$TARGET_PLAYER", "$LOG_EVENT", "$ACTOR_PLAYER"],
            "code": [
                ["COND",
                    ["NOT_EQUAL", "$TARGET_PLAYER", null],
                    [
                        ["COND",
                            ["NOT_EQUAL", "$PLAYER_DATA.$TARGET_PLAYER.viewingSideboard", true],
                            [
                                ["DO_LOG", "$LOG_EVENT", "$ACTOR_PLAYER", "$TARGET_PLAYER", "browse Sideboard.", "browses Sideboard."],
                                ["SET", "/playerData/$TARGET_PLAYER/viewingSideboard", true],
                                ["FOR_EACH_KEY_VAL", "$REGION_ID", "$REGION", "$GAME.layout.regions", [
                                    ["COND",
                                        ["EQUAL", "$REGION.layerIndex", 1],
                                        ["SET", "/playerData/$TARGET_PLAYER/layout/regions/$REGION_ID/visible", true]
                                    ]
                                ]]
                            ],
                            ["TRUE"],
                            [
                                ["DO_LOG", "$LOG_EVENT", "$ACTOR_PLAYER", "$TARGET_PLAYER", "close Sideboard.", "closes Sideboard."],
                                ["SET", "/playerData/$TARGET_PLAYER/viewingSideboard", false],
                                ["FOR_EACH_KEY_VAL", "$REGION_ID", "$REGION", "$GAME.layout.regions", [
                                    ["COND",
                                        ["EQUAL", "$REGION.layerIndex", 1],
                                        ["SET", "/playerData/$TARGET_PLAYER/layout/regions/$REGION_ID/visible", false]
                                    ]
                                ]]
                            ]
                        ]
                    ]
                ]
            ]
        },
        "DO_TOGGLE_SIDEBOARD_GROUP": {
            "args": ["$TARGET_PLAYER", "$TARGET_GROUP_ID", "$LOG_EVENT", "$ACTOR_PLAYER"],
            "code": [
                ["COND",
                    ["AND",
                        ["NOT_EQUAL", "$TARGET_PLAYER", null],
                        ["NOT_EQUAL", "$TARGET_GROUP_ID", null]
                    ],
                    [
                        ["VAR", "$TARGET_GROUP_LABEL", "$GROUP_BY_ID.$TARGET_GROUP_ID.label"],
                        ["COND",
                            ["EQUAL", "$PLAYER_DATA.$TARGET_PLAYER.browseGroup.id", "$TARGET_GROUP_ID"],
                            [
                                ["DO_LOG", "$LOG_EVENT", "$ACTOR_PLAYER", "$TARGET_PLAYER", "close {{$TARGET_GROUP_LABEL}}.", "closes {{$TARGET_GROUP_LABEL}}."],
                                ["STOP_LOOKING", "$TARGET_PLAYER", "hide"]
                            ],
                            ["TRUE"],
                            [
                                ["DO_LOG", "$LOG_EVENT", "$ACTOR_PLAYER", "$TARGET_PLAYER", "browse {{$TARGET_GROUP_LABEL}}.", "browses {{$TARGET_GROUP_LABEL}}."],
                                ["LOOK_AT", "$TARGET_PLAYER", "$TARGET_GROUP_ID", -1, false]
                            ]
                        ]
                    ]
                ]
            ]
        }
    },
    "labels": {
        "toggleSideboard": {
            "English": "Browse / Close Sideboard"
        },
        "toggleOffMap": {
            "English": "Browse / Close Off Map"
        },
        "toggleNotInPlay": {
            "English": "Browse / Close Not in Play"
        },
        "toggleVictoryDisplay": {
            "English": "Browse / Close Victory Display"
        },
        "toggleTokens": {
            "English": "Browse / Close Tokens"
        },
        "toggleChaosBag": {
            "English": "Browse / Close Chaos Bag"
        }
    }
}