{
    "actionLists": {
        "exhaustCard": [
            ["EXHAUST_CARD", "$ACTIVE_CARD", true]
        ],
        "readyCard": [
            ["READY_CARD", "$ACTIVE_CARD", true]
        ]
    },
    "functions": {
        "EXHAUST_CARD": {
            "args": ["$CARD", "$LOG"],
            "code": [
                ["COND",
                    ["EQUAL", "$CARD.currentFace.type", "MiniInvestigator"],
                    [
                        ["COND",
                            ["EQUAL", "$CARD.currentSide", "A"],
                            [
                                ["COND",
                                    ["EQUAL", "$LOG", true],
                                    ["LOG", "{{$ALIAS_N}} exhausts {{$CARD.currentFace.name}}."]
                                ],
                                ["SET", "/cardById/$CARD.id/currentSide", "B"],
                                ["SET", "/cardById/$CARD.id/exhausted", true]
                            ]
                        ]
                    ],
                    ["TRUE"],
                    [
                        ["COND",
                            ["EQUAL", "$CARD.rotation", 0],
                            [
                                ["COND",
                                    ["EQUAL", "$LOG", true],
                                    ["LOG", "{{$ALIAS_N}} exhausts {{$CARD.currentFace.name}}."]
                                ],
                                ["SET", "/cardById/$CARD.id/rotation", 90],
                                ["SET", "/cardById/$CARD.id/exhausted", true]
                            ]
                        ]
                    ]
                ]
            ]
        },
        "READY_CARD": {
            "args": ["$CARD", "$LOG"],
            "code": [
                ["COND",
                    ["EQUAL", "$CARD.currentFace.type", "MiniInvestigator"],
                    [
                        ["COND",
                            ["NOT_EQUAL", "$CARD.currentSide", "A"],
                            [
                                ["COND",
                                    ["EQUAL", "$LOG", true],
                                    ["LOG", "{{$ALIAS_N}} readies {{$CARD.currentFace.name}}."]
                                ],
                                ["SET", "/cardById/$CARD.id/currentSide", "A"],
                                ["SET", "/cardById/$CARD.id/exhausted", false]
                            ]
                        ]
                    ],
                    ["TRUE"],
                    [
                        ["COND",
                            ["NOT_EQUAL", "$CARD.rotation", 0],
                            [
                                ["COND",
                                    ["EQUAL", "$LOG", true],
                                    ["LOG", "{{$ALIAS_N}} readies {{$CARD.currentFace.name}}."]
                                ],
                                ["SET", "/cardById/$CARD.id/rotation", 0],
                                ["SET", "/cardById/$CARD.id/exhausted", false]
                            ]
                        ]
                    ]
                ]
            ]
        }
    },
    "labels": {
        "exhaustCard": {
            "English": "Exhaust"
        },
        "readyCard": {
            "English": "Ready"
        }
    }
}