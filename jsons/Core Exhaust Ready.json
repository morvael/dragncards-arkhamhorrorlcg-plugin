{
    "actionLists": {
        "exhaustReadyCard": [
            ["COND",
                ["EQUAL", "$ACTIVE_CARD.currentFace.type", "MiniInvestigator"],
                ["COND",
                    ["EQUAL", "$ACTIVE_CARD.currentSide", "A"],
                    ["DO_EXHAUST_CARD", "$PLAYER_N", "$ACTIVE_CARD_ID", true, "$PLAYER_N"],
                    ["TRUE"],
                    ["DO_READY_CARD", "$PLAYER_N", "$ACTIVE_CARD_ID", true, "$PLAYER_N"]
                ],
                ["TRUE"],
                ["COND",
                    ["EQUAL", "$ACTIVE_CARD.rotation", 0],
                    ["DO_EXHAUST_CARD", "$PLAYER_N", "$ACTIVE_CARD_ID", true, "$PLAYER_N"],
                    ["TRUE"],
                    ["DO_READY_CARD", "$PLAYER_N", "$ACTIVE_CARD_ID", true, "$PLAYER_N"]
                ]
            ]
        ]
    },
    "functions": {
        "DO_EXHAUST_CARD": {
            "args": ["$TARGET_PLAYER", "$TARGET_CARD_ID", "$LOG_EVENT", "$ACTOR_PLAYER"],
            "code": [
                ["VAR", "$TARGET_CARD", "$CARD_BY_ID.$TARGET_CARD_ID"],
                ["COND",
                    ["NOT_EQUAL", "$TARGET_CARD", null],
                    ["COND",
                        ["EQUAL", "$TARGET_CARD.currentFace.type", "MiniInvestigator"],
                        ["COND",
                            ["EQUAL", "$TARGET_CARD.currentSide", "A"],
                            [
                                ["DO_LOG", "$LOG_EVENT", "$ACTOR_PLAYER", "$TARGET_PLAYER", "exhaust {{$TARGET_CARD.currentFace.name}}.", "exhausts {{$TARGET_CARD.currentFace.name}}."],
                                ["DO_FLIP_FACEDOWN", "$TARGET_PLAYER", "$TARGET_CARD_ID", false, null]
                            ]
                        ],
                        ["TRUE"],
                        ["COND",
                            ["EQUAL", "$TARGET_CARD.rotation", 0],
                            [
                                ["DO_LOG", "$LOG_EVENT", "$ACTOR_PLAYER", "$TARGET_PLAYER", "exhaust {{$TARGET_CARD.currentFace.name}}.", "exhausts {{$TARGET_CARD.currentFace.name}}."],
                                ["SET", "/cardById/$TARGET_CARD_ID/rotation", 90]
                            ]
                        ]
                    ]
                ]
            ]
        },
        "DO_READY_CARD": {
            "args": ["$TARGET_PLAYER", "$TARGET_CARD_ID", "$LOG_EVENT", "$ACTOR_PLAYER"],
            "code": [
                ["VAR", "$TARGET_CARD", "$CARD_BY_ID.$TARGET_CARD_ID"],
                ["COND",
                    ["NOT_EQUAL", "$TARGET_CARD", null],
                    ["COND",
                        ["EQUAL", "$TARGET_CARD.currentFace.type", "MiniInvestigator"],
                        ["COND",
                            ["NOT_EQUAL", "$TARGET_CARD.currentSide", "A"],
                            [
                                ["DO_LOG", "$LOG_EVENT", "$ACTOR_PLAYER", "$TARGET_PLAYER", "ready {{$TARGET_CARD.currentFace.name}}.", "readies {{$TARGET_CARD.currentFace.name}}."],
                                ["DO_FLIP_FACEUP", "$TARGET_PLAYER", "$TARGET_CARD_ID", false, null]
                            ]
                        ],
                        ["TRUE"],
                        ["COND",
                            ["NOT_EQUAL", "$TARGET_CARD.rotation", 0],
                            [
                                ["DO_LOG", "$LOG_EVENT", "$ACTOR_PLAYER", "$TARGET_PLAYER", "ready {{$TARGET_CARD.currentFace.name}}.", "readies {{$TARGET_CARD.currentFace.name}}."],
                                ["SET", "/cardById/$TARGET_CARD_ID/rotation", 0]
                            ]
                        ]
                    ]
                ]
            ]
        }
    },
    "labels": {
        "exhaustReadyCard": {
            "English": "Exhaust / Ready"
        }
    }
}